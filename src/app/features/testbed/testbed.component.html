<section class="testbed">
  <app-topbar
    [status]="status()"
    [settingsVisible]="guiVisible()"
    (runBenchmark)="runBenchmark()"
    (exportMetrics)="exportMetrics()"
    (toggleGui)="toggleGui()"
  ></app-topbar>

  <main class="layout">
    <div class="viewport-stage">
      <app-viewport></app-viewport>
      <app-hud [rendererLabel]="rendererLabel()" [metrics]="metrics()"></app-hud>
      <app-settings-dock
        [visible]="guiVisible()"
        [settings]="settings()"
        [sceneSettings]="sceneSettings()"
        [capabilities]="capabilitySummary()"
        [renderingSupport]="renderingSupport()"
        (renderingUpdated)="updateRenderingSetting($event)"
        (sceneUpdated)="updateSceneSetting($event)"
      ></app-settings-dock>
      <app-status-bar [status]="status()" [benchmark]="benchmark()"></app-status-bar>
    </div>

    <app-sidebar>
      <app-collections-panel
        [collections]="collections()"
        [activeId]="activeCollectionId()"
        (select)="selectCollection($event)"
      ></app-collections-panel>

      <app-presets-panel
        [presets]="presets()"
        [presetName]="presetName()"
        (apply)="applyPreset($event)"
        (delete)="deletePreset($event)"
        (updateName)="updatePresetName($event)"
        (save)="savePreset()"
      ></app-presets-panel>

      <app-capabilities-panel [capabilities]="capabilitySummary()"></app-capabilities-panel>

      <app-inspector-panel [inspector]="inspector()"></app-inspector-panel>
    </app-sidebar>
  </main>

</section>
